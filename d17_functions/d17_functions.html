<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Functions and iteration   ðŸ¤–</title>
    <meta charset="utf-8" />
    <meta name="author" content="S. Mason Garrison" />
    <script src="libs/header-attrs/header-attrs.js"></script>
    <link href="libs/font-awesome/css/all.css" rel="stylesheet" />
    <link href="libs/font-awesome/css/v4-shims.css" rel="stylesheet" />
    <link rel="stylesheet" href="../slides.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# Functions and iteration <br> ðŸ¤–
### S. Mason Garrison

---





layout: true
  
&lt;div class="my-footer"&gt;
&lt;span&gt;
&lt;a href="https://DataScience4Psych.github.io/DataScience4Psych/" target="_blank"&gt;Data Science for Psychologists&lt;/a&gt;
&lt;/span&gt;
&lt;/div&gt; 

---




class: middle

# Edinburgh College of Art Collection
Extra Scaffolding

---





&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; title &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; artist &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; link &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Untitled (1963) &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; [Unknown] Black &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; https://collections.ed.ac.uk/art/record/22024?highlight=*:* &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Rooftops &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; A McIntosh &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; https://collections.ed.ac.uk/art/record/21465?highlight=*:* &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Seated Male Nude (19 Nov 1958) &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; A Robson &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; https://collections.ed.ac.uk/art/record/20937?highlight=*:* &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Portrait of a Man (19 Nov 1958) &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; A Robson &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; https://collections.ed.ac.uk/art/record/20936?highlight=*:* &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Portrait of a Woman (1953) &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; A Scott &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; https://collections.ed.ac.uk/art/record/21198?highlight=*:* &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Poirtrait of a Man &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; A Sinclair &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; https://collections.ed.ac.uk/art/record/21440?highlight=*:* &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;



---

&lt;img src="img/untitled-1963.png" width="70%" style="display: block; margin: auto;" /&gt;

---

&lt;img src="img/untitled-1963-headers-values.png" width="70%" style="display: block; margin: auto;" /&gt;

---

&lt;img src="img/untitled-1963-to-df.png" width="100%" style="display: block; margin: auto;" /&gt;

---

.your-turn[
- [class git repo](https://github.com/DataScience4Psych) &gt; `AE 09 - UoE Art + Functions`.
- Open `01-individual-pieces.R`
- Follow along, and fill in the blanks as we go.
]

---


.small[

```r
# load packages ----------------------------------------------------------------
library(tidyverse)
library(rvest)

# first url --------------------------------------------------------------------

## set url ----
first_info_url &lt;- "https://collections.ed.ac.uk/art/record/22024?highlight=*:*"

## read page at url ----
page &lt;- read_html(first_info_url)

## scrape headers ----
headers &lt;- page %&gt;%
  html_nodes("th") %&gt;%
  html_text()

## scrape values ----
values &lt;- page %&gt;%
  html_nodes("td") %&gt;%
  html_text() %&gt;%
  str_squish()

## put together in a tibble and add link to help keep track ----
tibble(headers, values) %&gt;%
  pivot_wider(names_from = headers, values_from = values) %&gt;%
  add_column(link = first_info_url)
```
]

---

# Setting Up
.medi[

```r
# load packages 

library(tidyverse)
library(rvest)

# first url

## set url 
first_info_url &lt;- "https://collections.ed.ac.uk/art/record/22024?highlight=*:*"

## read page at url ----
page &lt;- read_html(first_info_url)
```
]
---

# Scrape headers


```r
headers &lt;- page %&gt;%
  html_nodes("th") %&gt;%
  html_text()
```

---

# Scrape Values


```r
values &lt;- page %&gt;%
  html_nodes("td") %&gt;%
  html_text() %&gt;%
  str_squish()
```

---

# Put it together


```r
## put together in a tibble and add link to help keep track 

tibble(headers, values) %&gt;%
  pivot_wider(names_from = headers, 
              values_from = values) %&gt;%
  add_column(link = first_info_url)
```

```
## # A tibble: 1 x 12
##   Artist Title Date  Period Description Material Dimensions
##   &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;  &lt;chr&gt;       &lt;chr&gt;    &lt;chr&gt;     
## 1 [Unkn~ Unti~ 1963  20th ~ Portrait o~ graphit~ 45.1cm H ~
## # ... with 5 more variables: Collection &lt;chr&gt;,
## #   Classification &lt;chr&gt;, Signature &lt;chr&gt;, `Accession
## #   Number` &lt;chr&gt;, link &lt;chr&gt;
```


---

class: middle

# Wrapping Up...

---

class: middle

# Functions

---

## When should you write a function?
&lt;br&gt;
--
.pull-left[
&lt;img src="img/funct-all-things.png" width="100%" style="display: block; margin: auto;" /&gt;
]
--
.pull-right[

- When you've copied and pasted a block of code more than twice.
]

--

&lt;br&gt;
.question[
How many times will we need to copy and paste the code we developed to scrape data on all of the art??
]

---

## Why functions?

- Automate common tasks in a more powerful and general way than copy-and-pasting:
  - Give your function an evocative name that makes your code easier to understand
  - As requirements change, only need to update code in one place, instead of many
  - Eliminate chance of making incidental mistakes when you copy and paste
      - (for example... updating a variable name in one place, but not in another)
      
--

- Long-term
  - Improve your reach as a data scientist by writing functions (and packages!) that others use
  - Useful for internal lab management as well...


---

## Inputs

.question[
How many inputs does the following code have?
]

.midi[

```r
## set url ----
first_info_url &lt;- "https://collections.ed.ac.uk/art/record/22024?highlight=*:*"

## read page at url ----
page &lt;- read_html(first_info_url)

## scrape headers ----
headers &lt;- page %&gt;%
  html_nodes("th") %&gt;%
  html_text()

## scrape values ----
values &lt;- page %&gt;%
  html_nodes("td") %&gt;%
  html_text() %&gt;%
  str_squish()

## put together in a tibble and add link to help keep track ----
tibble(headers, values) %&gt;%
  pivot_wider(names_from = headers, values_from = values) %&gt;%
  add_column(link = first_info_url)
```
]

---

## Inputs

.question[
How many inputs does the following code have?
]

.midi[

```r
## set url ----
*first_info_url &lt;- "https://collections.ed.ac.uk/art/record/22024?highlight=*:*"

## read page at url ----
*page &lt;- read_html(first_info_url)

## scrape headers ----
headers &lt;- page %&gt;%
  html_nodes("th") %&gt;%
  html_text()

## scrape values ----
values &lt;- page %&gt;%
  html_nodes("td") %&gt;%
  html_text() %&gt;%
  str_squish()

## put together in a tibble and add link to help keep track ----
tibble(headers, values) %&gt;%
  pivot_wider(names_from = headers, values_from = values) %&gt;%
* add_column(link = first_info_url)
```
]

---

## Turn your code into a function
.pull-left[
- Pick a short but informative **name**, preferably a verb.
]

.pull-right[

```r
scrape_art_info &lt;- 
```
]
---

## Turn your code into a function

.pull-left[
- Pick a short but informative **name**, preferably a verb.
- List inputs, or **arguments**, to the function inside `function`. If we had more arguments the call would look like `function(x, y, z)`.

]

.pull-right[


```r
scrape_art_info &lt;- function(x){
  
  
  
  
  
}  
```
]
---

## Turn your code into a function
.pull-left[
- Pick a short but informative **name**, preferably a verb.
- List inputs, or **arguments**, to the function inside `function`. If we had more the call would look like `function(x, y, z)`.
- Place the **code** you have developed in body of the function, a `{}` block that immediately follows `function(...)`.
]
.pull-right[

```r
scrape_art_info &lt;- function(x){

  # code we developed earlier 
  # to scrape info 
  # on single art piece goes here
  
}
```
]
---

.your-turn[
- [class git repo](https://github.com/DataScience4Psych) &gt; `AE 09 - UoE Art + Functions`.
- Open `02-functionalize.R`
- Follow along, and fill in the blanks if you like
]

---

.midi[

```r
scrape_art_info &lt;- function(x){
  
  # read page at url ----
  page &lt;- read_html(x)
  
  # scrape headers ----
  headers &lt;- page %&gt;%
    html_nodes("th") %&gt;%
    html_text()
  
  # scrape values ----
  values &lt;- page %&gt;%
    html_nodes("td") %&gt;%
    html_text() %&gt;%
    str_squish()

  # put together in a tibble and add link to help keep track ----
  tibble(headers, values) %&gt;%
    pivot_wider(names_from = headers, values_from = values) %&gt;%
    add_column(link = x)
  
}
```
]

---

## Function in action

.midi[

```r
scrape_art_info(uoe_art$link[1]) %&gt;%
  glimpse()
```

```
## Rows: 1
## Columns: 12
## $ Artist             &lt;chr&gt; "[Unknown] Black"
## $ Title              &lt;chr&gt; "Untitled"
## $ Date               &lt;chr&gt; "1963"
## $ Period             &lt;chr&gt; "20th century; 1960s"
## $ Description        &lt;chr&gt; "Portrait of a woman"
## $ Material           &lt;chr&gt; "graphite (mineral)/inorganic mat...
## $ Dimensions         &lt;chr&gt; "45.1cm H x 33cm W"
## $ Collection         &lt;chr&gt; "Art Collection; Edinburgh Colleg...
## $ Classification     &lt;chr&gt; "drawings (visual works); pencil ...
## $ Signature          &lt;chr&gt; "Signature on drawing reads \"Bla...
## $ `Accession Number` &lt;chr&gt; "EU2907"
## $ link               &lt;chr&gt; "https://collections.ed.ac.uk/art...
```
]

&lt;img class="imageoverlay" src="img/untitled-1963.png" style="width:378px;height:300px;border:1"&gt;


---

## Function in action


```r
scrape_art_info(uoe_art$link[2]) %&gt;%
  glimpse()
```

```
## Rows: 1
## Columns: 7
## $ Artist             &lt;chr&gt; "A McIntosh"
## $ Title              &lt;chr&gt; "Rooftops"
## $ Material           &lt;chr&gt; "paint (coating)"
## $ Collection         &lt;chr&gt; "Art Collection; Edinburgh Colleg...
## $ Classification     &lt;chr&gt; "paintings (visual works)"
## $ `Accession Number` &lt;chr&gt; "EU2339"
## $ link               &lt;chr&gt; "https://collections.ed.ac.uk/art...
```

&lt;img class="imageoverlay" src="img/rooftops.png" style="width:388px;height:250px;border:1"&gt;

---

## Function in action

.midi[

```r
scrape_art_info(uoe_art$link[3]) %&gt;%
  glimpse()
```

```
## Rows: 1
## Columns: 9
## $ Artist             &lt;chr&gt; "A Robson"
## $ Title              &lt;chr&gt; "Seated Male Nude"
## $ Date               &lt;chr&gt; "19 Nov 1958"
## $ Period             &lt;chr&gt; "20th century; 1950s"
## $ Description        &lt;chr&gt; "Gained his Diploma in 1959 from ...
## $ Material           &lt;chr&gt; "graphite (mineral)/inorganic mat...
## $ Collection         &lt;chr&gt; "Art Collection; Edinburgh Colleg...
## $ `Accession Number` &lt;chr&gt; "EU1810"
## $ link               &lt;chr&gt; "https://collections.ed.ac.uk/art...
```
]

&lt;img class="imageoverlay" src="img/seated-male-nude.png" style="width:380px;height:250px;border:1"&gt;

---

class: middle

# Wrapping Up...


---

class: middle

# Writing functions

---

## What goes in / what comes out?

- They take input(s) defined in the function definition

.medi[

```r
function([inputs separated by commas]){
  # what to do with those inputs
}
```
]

- By default they return the last value computed in the function

.medi[

```r
scrape_page &lt;- function(x){
  # do bunch of stuff with the input...
  # return a tibble
  tibble(...)
}
```
]

 - You can define more outputs to be returned in a list as well as nice print methods 
   - (but we won't go there for now...)


---

.question[
What is going on here?
]


```r
add_2 &lt;- function(x){
  x + 2
  1000
}
```


```r
add_2(3)
```

```
## [1] 1000
```

```r
add_2(10)
```

```
## [1] 1000
```

---


## Naming functions

&gt; "There are only two hard things in Computer Science: cache invalidation and naming things." 

&gt;  -- Phil Karlton

---

## Naming functions

- Names should be short but clearly evoke what the function does

--
- Names should be verbs, not nouns

--
- Multi-word names should be separated by underscores (`snake_case` as opposed to `camelCase`)

--
- A family of functions should be named similarly (`scrape_page()`, `scrape_speech()` OR `str_remove()`, `str_replace()` etc.)

--
- Avoid overwriting existing (especially widely used) functions


```r
# JUST DON'T
mean &lt;- function(x){ 
  x * 3 
  }
```


---

class: middle

# Wrapping Up



---

class: middle

# Automation

---

## Define the task

- Goal: Scrape info on all 2909 art pieces in the collection
- So far:
.small[

```r
scrape_art_info(uoe_art$link[1])
scrape_art_info(uoe_art$link[2])
scrape_art_info(uoe_art$link[3])
```
]
- What else do we need to do?
  - Run the `scrape_art_info()` function on all 2909 links
  - Combine the resulting data frames from each run into one giant data frame with 2909 rows
  
---

## Inputs

.question[
You now have a function that will scrape the relevant info on art pieces given the URL of its individual info page. Where can we get a list of URLs of each of the art pieces in the collection?
]

--

From the data frame you constructed previously: `uoe_art$link`

---

## Iteration

.question[
How can we tell R to apply the `scrape_art_info()` function to each link in `uoe_art$link`?
]

--

- Option 1: Write a **for loop**, i.e. explicitly tell R to visit a link, apply the function, store the result, then visit the next link, apply the function, append the result to the stored result from the previous link, and so on and so forth.
--

- Option 2: **Map** the function to each element in the list of links, and let R take care of the storing and appending of results.
--

- We'll go with Option 2!

---

## How does mapping work?

Suppose we have exam 1 and exam 2 scores of 4 students stored in a list...


```r
exam_scores &lt;- list(
  exam1 &lt;- c(80, 90, 70, 50),
  exam2 &lt;- c(85, 83, 45, 60)
)
```

--

...and we find the mean score in each exam


```r
map(exam_scores, mean)
```

```
## [[1]]
## [1] 72.5
## 
## [[2]]
## [1] 68.25
```

---

...and suppose we want the results as a numeric (double) vector


```r
map_dbl(exam_scores, mean)
```

```
## [1] 72.50 68.25
```

...or as a character string


```r
map_chr(exam_scores, mean)
```

```
## [1] "72.500000" "68.250000"
```

---

## `map_something`

Functions for looping over an object and returning a value (of a specific type):

* `map()` - returns a list
* `map_lgl()` - returns a logical vector
* `map_int()` - returns an integer vector
* `map_dbl()` - returns a double vector
* `map_chr()` - returns a character vector
* `map_df()` / `map_dfr()` - returns a data frame by row binding
* `map_dfc()` - returns a data frame by column binding
* ...

---

.your-turn[
- [class git repo](https://github.com/DataScience4Psych) &gt; `AE 09 - UoE Art + Functions`.
- Open `03-iterate.R`.
- Follow along, and fill in the blanks as we go.
]

---

## Go to each page, scrape art info 

- Map the `scrape_art_info()` function
- to each element of `uoe_art$link`
- and return a data frame by row binding


```r
uoe_art_info &lt;- map_df(uoe_art$link, scrape_art_info)
```

---



&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; Artist &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; Title &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; Date &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; Period &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; Description &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; Material &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; Dimensions &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; Collection &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; Classification &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; Signature &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; Accession Number &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; link &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; Alternative Title &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; Place Made &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; [Unknown] Black &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Untitled &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 1963 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 20th century; 1960s &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Portrait of a woman &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; graphite (mineral)/inorganic material/materials (substances); paper (fibre product) &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 45.1cm H x 33cm W &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Art Collection; Edinburgh College of Art &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; drawings (visual works); pencil drawings &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Signature on drawing reads &amp;quot;Black&amp;quot;, this is then written again on the border, followed by &amp;quot;D/P. 1963&amp;quot;. In the top right corner of the borner the name Black is written again. &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; EU2907 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; https://collections.ed.ac.uk/art/record/22024?highlight=*:* &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; NA &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; NA &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; A McIntosh &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Rooftops &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; NA &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; NA &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; NA &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; paint (coating) &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; NA &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Art Collection; Edinburgh College of Art &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; paintings (visual works) &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; NA &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; EU2339 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; https://collections.ed.ac.uk/art/record/21465?highlight=*:* &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; NA &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; NA &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; A Robson &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Seated Male Nude &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 19 Nov 1958 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 20th century; 1950s &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Gained his Diploma in 1959 from ECA. &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; graphite (mineral)/inorganic material/materials (substances) &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; NA &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Art Collection; Edinburgh College of Art &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; NA &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; NA &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; EU1810 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; https://collections.ed.ac.uk/art/record/20937?highlight=*:* &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; NA &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; NA &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; A Robson &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Portrait of a Man &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 19 Nov 1958 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 20th century; 1950s &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Gained his Diploma in 1959 from ECA. &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; graphite (mineral)/inorganic material/materials (substances) &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; NA &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Art Collection; Edinburgh College of Art &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; NA &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; NA &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; EU1809 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; https://collections.ed.ac.uk/art/record/20936?highlight=*:* &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; NA &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; NA &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; A Scott &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Portrait of a Woman &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 1953 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 20th century; 1950s &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Drawing from a Diploma examination. &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; graphite (mineral)/inorganic material/materials (substances) &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; NA &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Art Collection; Edinburgh College of Art &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; pencil drawings &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; NA &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; EU2071 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; https://collections.ed.ac.uk/art/record/21198?highlight=*:* &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; NA &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; NA &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; A Sinclair &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Poirtrait of a Man &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; NA &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; NA &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; NA &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; NA &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; NA &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Art Collection; Edinburgh College of Art &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; NA &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; NA &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; EU2314 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; https://collections.ed.ac.uk/art/record/21440?highlight=*:* &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; NA &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; NA &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

---

## What could go wrong?


```r
uoe_art_info &lt;- map_df(uoe_art$link, scrape_art_info)
```

- This code will take a while to run
- If you get `HTTP Error 429 (Too many requests)` you might want to slow down your hits by modifying your function to slow it down by adding a random wait (sleep) time between hitting each link


```r
scrape_art_info &lt;- function(x){
  
  # Sleep for randomly generated number of seconds
  # Generated from a uniform distribution between 0 and 1
* Sys.sleep(runif(1))
  
  # Rest of your function code goes here...
}
```

---
# Sources

- Mine Ã‡etinkaya-Rundel's Data Science in a Box([link](https://datasciencebox.org/))

---

class: middle

# Wrapping Up...
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"ratio": "16:9",
"highlightLines": true,
"highlightStyle": "solarized-light",
"countIncrementalSlides": false,
"slideNumberFormat": ""
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
